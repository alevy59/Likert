---
title: "A Escala Likert"
author: "prof. Ariel Levy"
date: "`r Sys.Date()`"
output:
  html_document: default
  word_document: default
bibliography: references.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introdução

Hoje estarei apresentando um estudo referente a escala likert, mais precisamente a produção dos gráficos do pacote likert@bryer2016 . Seguirei em parte o artigo da professora Regis Komperda entitulado: **Likert-Type Survey Data Analysis withR and RStudio** @komperda2017.

Mas antes creio que seria oportuno conhecer um pouco mais sobre Rensis Likert.

Apesar de Likert ter estudado 3 anos de Engenharia civil formou-se como bacharel em Sociologia e mais tarde tornou-se Phd em Psicologia.

Ele é reconhecido por sua teoria de gestão participativa, na qual sugere que os gerentes que recompensam a iniciativa própria dos funcionários e incentivam a contribuição destes nas decisões de negócios se beneficiariam de maiores níveis de produtividade. Contudo, sua contribuição mais conhecida é a escala Likert, uma ferramenta psicométrica simples que se tornou a escala de classificação mais popular utilizada em pesquisas de opinião e em campos como marketing, psicologia e outras ciências sociais@rensisl2021.

Esta escala de classificação é utilizda para medir o grau de concordância ou discordância de um indivíduo com uma série de afirmações. A escala geralmente tem 5 pontos, (pode-se apresentar 3 a 10 pontos), variando de "concordo totalmente" a "discordo totalmente", com um ponto intermediário representando uma posição neutra ou indecisa. Os valores numéricos são atribuídos a cada resposta e as respostas são combinadas para determinar a atitude geral do indivíduo em relação ao assunto em questão.

Evitando respostas dicotômicas (sim ou não) É flexível e permite medir personalidade, opiniões, comportamentos e atitudes com respostas quantitativas ordinais de fácil interpretação.

Entretanto, a construção cuidadosa da escala e da pergunta é necessária para garantir resultados precisos. Um cuidado deve ser tomado em relação aos resultados que podem ser influenciados pelo viés de resposta, onde os entrevistados respondem de maneiras que consideram socialmente aceitáveis ou da maneira que acham que o pesquisador deseja que eles respondam.

A escala Likert produz dados ordinais, o que significa que as respostas são classificadas em uma ordem específica (por exemplo, "discordo totalmente" é classificado abaixo de "discordo"). No entanto, a distância entre as categorias de resposta não é necessariamente igual. Por exemplo, a diferença entre "discordo totalmente" e "discordo" pode não ser a mesma que a diferença entre "discordo" e "nem concordo nem discordo". Portanto, embora seja possível calcular a média das respostas em uma escala Likert, essa média não representa uma medida precisa da atitude geral do grupo em relação ao assunto em questão. É importante ter isso em mente ao analisar os resultados de uma pesquisa que usa uma escala Likert @kostoulas2013.

Há medidas de posição mais apropriadas para estes tipos de dados, a saber:

-   **mediana**, valor que divide os dados em duas metades iguais quando os dados são classificados em ordem crescente.

-   **moda**, o valor que ocorre com mais frequência nos dados.

Ao formular perguntas para uso com a escala Likert em uma pesquisa, é importante que as perguntas estejam relacionadas à teoria ou às hipóteses que estão sendo testadas. As perguntas devem ser projetadas para fornecer informações que ajudem a responder às perguntas de pesquisa ou a testar as hipóteses. É importante garantir que as perguntas sejam relevantes para o objetivo da pesquisa e que sejam formuladas de forma a fornecer informações úteis e precisas. É uma boa ideia revisar a literatura existente sobre o assunto em questão para garantir que as perguntas estejam alinhadas com as teorias e hipóteses atuais.

A título de exemplo na base de dados que analisaremos a seguir, do Programme of International Student Assessment (PISA), a pergunta ST24Q01 - *"I read Only if I have to"* os pesquisadores podem coletar dados sobre as atitudes e comportamentos dos alunos em relação à leitura por prazer.

Esses dados podem ser usados para testar hipóteses e teorias sobre a relação entre a leitura por prazer e outros fatores, como o desempenho acadêmico ou o bem-estar emocional. Por exemplo, os pesquisadores podem usar os dados coletados para testar a hipótese de que os alunos que leem por prazer com mais frequência têm melhor desempenho acadêmico do que os alunos que leem por prazer com menos frequência.

Contribuição do estudo desenvolvido Instituto de Educação da Universidade de Londres @reading2021

Embora esta não seja uma fundamentação robusta seria relativmente fácil obter o artigo dos professores citados, mas foge ao nosso tema.

## O pacote Likert

Seguirei o artigo da professora Komperda @komperda2017 como dissemos e introduzindo as modificações adequadas ao analisar os dados de 2009 do PISA - Programme of International Student Assessment disponíveis no pacote likert @bryer2016.

### Instalar e carregar os pacotes

```{r pacotes, warning= FALSE, message=FALSE}

if(!require(pacman)){install.packages("pacman")}
pacman::p_load(tidyverse,scales, likert)
```

A instrução verifica se o pacote *pacman* está instalado e se não estiver instalará este pacote a instrução *p_load* fará o mesmo em relação os demais e os carregará na memória ( embora, de certa forma considere uma falta de etiqueta instalar pacotes na máquina de outra pessoa).

### Os dados

Agora já temos os pacotes carregados, vamos aos dados.

```{r dados}

data(pisaitems)

# dim(pisaitems)

```

Bem esses dados apresentam 81 colunas (variáveis) que correspondem as questões e 66690 respostas. se desejar poderá inspecionar a base em outra aba descomentando e executando a instrução comentada.

A seguir selecionaremos uma das colunas para ter um sumário da questão.

```{r summary ST24Q01}

pisaitems %>% select(ST24Q01) %>% summary()

```

Para fins desta análise iremos criar um sub conjunto que denominaremos pisa_subset e traduziremos as perguntas.

```{r}
pisa_subset <- pisaitems  %>% 
  select(1:6) %>% 
  setNames(c(
    "País",
    "Eu só leio se eu tiver que ler.",
    "Ler é um dos meus hobbies favoritos.",
    "Gosto de conversar sobre livros com outras pessoas.",
    "Acho difícil terminar livros.",
    "Fico feliz se receber um livro de presente."
  ))
```

Agora que o conjunto em análise é menor iremos verificar a estrutura.

```{r str}

pisa_subset %>% glimpse()

```

### Os gráficos para análise

Primeiro será preciso criar o objeto de saída do likert, pra isso deixaremos de fora a primeira coluna referente aos países. E tenha em mente que este pacote não trabalha com tibbles. E logo em seguida obteremos nosso primeiro gráfico.

```{r liker out, warning=FALSE}

likert_out<- select(pisa_subset,2:6)
likert_out<-likert(as.data.frame(likert_out))
plot(likert_out)

```

O pacote apresenta um gráfico de design moderno e de fácil interpretação onde as perguntas partem da neutralidade, centro das quatro opções embora não oertada ao respondente, e mostram suas posições. Entretanto, um olhar mais cuidadoso verá que a legenda está em inglês e cortada na imagem.

Para corrigir, embora possam haver outras soluções, preferi recodificar os fatores para isso criei a função translate_data que utiliza a função recode_factor ()\_

```{r}
# Função para traduzir as respostas
translate_data <- function(x) {
  dplyr::recode_factor(x,
                       `Strongly disagree` = "Discordo totalmente",
                       `Disagree` = "Discordo",
                       `Neither agree nor disagree` = "Nem concordo nem discordo",
                       `Agree` = "Concordo",
                       `Strongly agree` = "Concordo totalmente"
  )
}
```

Agora podemos traduzir a base

```{r traduzindo}
# traduzir utilizando mutate e a função que criamos
pisa_subset_translated <- pisa_subset  %>% 
  mutate(across(`Eu só leio se eu tiver que ler.`:`Fico feliz se receber um livro de presente.`, ~ translate_data(.x)))
```

Apenas para entender vamos visualizar

```{r ver tradução}

pisa_subset_translated %>% glimpse()

```

Agora precisaremos organizar novamente o elemento de saída do likert

```{r likertout traduzido}
likert_out<- select(pisa_subset_translated,2:6)
likert_out<-likert(as.data.frame(likert_out))

```

e produzir o novo gráfico

```{r likert plot pt br, warning=FALSE}
plot(likert_out, centered=TRUE) + 
  theme(text=element_text(size=11))
```

Ainda temos alguns problemas mas podemos controlar os elementos @wickham2022.

```{r novas cores e legenda, warning=FALSE}
plot(likert_out, 
            centered=TRUE,
          low.color="firebrick",
          high.color="forestgreen") +
  scale_fill_manual(name="Respostas", 
                    values=c( "#92C492","forestgreen", "#C08A8B","firebrick"))+
  ylab("Porcentagem") +
  theme(text=element_text(size=11),
        legend.position = "bottom",
        legend.justification = "right",
        legend.direction = "horizontal",
        legend.margin = margin(t = 3),
        axis.text.y = element_text(angle = 0),
        legend.key.size = unit(0.5, "cm"),
        legend.text = element_text(size = 11),
        plot.margin = margin(t = 15, r = 5, b = 10, l = 5))

```

#### Agrupando os resultados por país

Iremos proceder da mesma forma recodificando o fator de País para obter os dados completamente traduzidos.

```{r}
pisa_subset_translated <- pisa_subset_translated %>%
  mutate(País = dplyr::recode_factor(País,
                       `Mexico` = "México",
                       `Canada` = "Canadá",
                       `United States` = "Estados Unidos"))

pisa_subset_translated %>% glimpse()
```

Agora pode-se produzir o gráfico agrupando as respostas por países. No gráfico a seguir o número de perguntas apresentadas foi reduzido para facilitar avisualização e análise dos resultados.

```{r group País,  warning=FALSE}

likert_out_group<-likert(as.data.frame(pisa_subset_translated[,2:4]), grouping=pisa_subset_translated$País)

plot(likert_out_group, group.order=c('México','Canadá','Estados Unidos'),
  centered=TRUE,
          low.color="firebrick",
          high.color="forestgreen") +
  scale_fill_manual(name="Respostas", 
                    values=c( "#92C492","forestgreen", "#C08A8B","firebrick"))+
  ylab("Porcentagem") +
  theme(text=element_text(size=11))
```

Não sou um especilista mas me parece que a última resposta, pelo menos para os EUA mostra que as demais sofreram algum viés.

Pronto agora passemos ao gráfico de calor *heatmap* também executado pelo pacote.

#### O gráfico de calor - *heatmap*

```{r heatmap}

likert_out<- select(pisa_subset_translated,2:6)
likert_out<-likert(as.data.frame(likert_out))
plot(likert_out, type="heat")

```

Infelizmente a função *plot()* do pacote likert com a opção *heat* adiciona automaticamente uma coluna para média não havendo uma alternativa integrda para a remoção desta coluna.

Uma alternativa é recorrer ao ggplot2 @wickham2016

```{r}
likert_out$results %>%
  pivot_longer(cols = -Item) %>%
  filter(name != "Mean") %>%
  mutate(name = factor(name, levels = rev(unique(name)))) %>%
  ggplot(aes(x = name, y = Item, fill = value)) +
  geom_tile() +
  scale_fill_gradient2(low = muted("red"), mid = "white", high = muted("blue"), midpoint = 0) +
  geom_text(aes(label = round(value, digits = 1))) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))+
  xlab("Respostas")+
  ylab("Perguntas")

```

Aqui termina nosso passei pelos gráficos do pacote likert, espero que tenha sido útil.

### Bibliografia
